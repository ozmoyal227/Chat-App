<div class="publisher bt-1 border-light p-3 bg-white d-flex align-items-center">
  <img
    class="avatar avatar-xs"
    src="https://img.icons8.com/color/36/000000/administrator-male.png"
    alt="..."
  />
  <input
    class="publisher-input flex-grow-1"
    type="text"
    placeholder="Write something"
    id="messageInput"
  />
  <button id="sendButton">Send</button>
</div>

<script>
  // const chatId = "<%= chatId %>";
  const userId = "<%= user.id %>";
  const userName = "<%= user.name %>";

  (() => {
    $("#sendButton").keypress(function (event) {
      var keycode = event.keyCode ? event.keyCode : event.which;
      if (keycode == "13") {
        alert('You pressed a "enter" key in textbox');
      }
    });

    $("#sendButton").on("click", function () {
      onSendMessage();
    });

    async function onSendMessage() {
      const messageText = $("#messageInput").val();

      const message = {
        senderId: userId,
        senderName: userName,
        text: messageText,
      };

      socket.emit("message:add", message, chatId);

      $("#messageInput").val("");
    }
  })();
</script>
